interactions:
- request:
    body: '{"title": "Test Filter", "context": ["home", "public"], "filter_action":
      "warn", "keywords_attributes": [{"keyword": "spam", "whole_word": true}, {"keyword":
      "eggs", "whole_word": false}]}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN_2
      Connection:
      - keep-alive
      Content-Length:
      - '188'
      Content-Type:
      - application/json
      User-Agent:
      - tests/v311
    method: POST
    uri: http://localhost:3000/api/v2/filters
  response:
    body:
      string: '{"id":"1","title":"Test Filter","context":["home","public"],"expires_at":null,"filter_action":"warn","keywords":[{"id":"1","keyword":"spam","whole_word":true},{"id":"2","keyword":"eggs","whole_word":false}],"statuses":[]}'
    headers:
      cache-control:
      - private, no-store
      content-length:
      - '221'
      content-security-policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      content-type:
      - application/json; charset=utf-8
      etag:
      - W/"f30e402112caae6e90bd39920326752d"
      referrer-policy:
      - strict-origin-when-cross-origin
      server-timing:
      - cache_read.active_support;dur=0.02, sql.active_record;dur=8.27, cache_generate.active_support;dur=1.27,
        cache_write.active_support;dur=0.07, instantiation.active_record;dur=0.34,
        start_processing.action_controller;dur=0.01, unpermitted_parameters.action_controller;dur=0.00,
        start_transaction.active_record;dur=0.00, transaction.active_record;dur=7.64,
        cache_delete.active_support;dur=0.02, render.active_model_serializers;dur=6.75,
        process_action.action_controller;dur=50.98
      vary:
      - Authorization, Origin
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-permitted-cross-domain-policies:
      - none
      x-ratelimit-limit:
      - '300'
      x-ratelimit-remaining:
      - '299'
      x-ratelimit-reset:
      - '2025-11-06T21:20:00.719859Z'
      x-request-id:
      - 2da79d9f-9151-4fb6-9e00-d09b980fc8c0
      x-runtime:
      - '0.087600'
      x-xss-protection:
      - '0'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN_2
      Connection:
      - keep-alive
      User-Agent:
      - tests/v311
    method: GET
    uri: http://localhost:3000/api/v2/filters/1
  response:
    body:
      string: '{"id":"1","title":"Test Filter","context":["home","public"],"expires_at":null,"filter_action":"warn","keywords":[{"id":"1","keyword":"spam","whole_word":true},{"id":"2","keyword":"eggs","whole_word":false}],"statuses":[]}'
    headers:
      cache-control:
      - private, no-store
      content-length:
      - '221'
      content-security-policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      content-type:
      - application/json; charset=utf-8
      etag:
      - W/"f30e402112caae6e90bd39920326752d"
      referrer-policy:
      - strict-origin-when-cross-origin
      server-timing:
      - cache_read.active_support;dur=0.03, sql.active_record;dur=1.49, cache_generate.active_support;dur=1.54,
        cache_write.active_support;dur=0.07, instantiation.active_record;dur=0.43,
        start_processing.action_controller;dur=0.00, render.active_model_serializers;dur=3.45,
        process_action.action_controller;dur=31.20
      vary:
      - Authorization, Origin
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-permitted-cross-domain-policies:
      - none
      x-ratelimit-limit:
      - '300'
      x-ratelimit-remaining:
      - '299'
      x-ratelimit-reset:
      - '2025-11-06T21:20:00.817404Z'
      x-request-id:
      - 971259cb-719a-490c-a8f1-909dc6f6cead
      x-runtime:
      - '0.049670'
      x-xss-protection:
      - '0'
    status:
      code: 200
      message: OK
- request:
    body: '{"filter_id": "1", "title": "Updated Title", "filter_action": "hide"}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN_2
      Connection:
      - keep-alive
      Content-Length:
      - '69'
      Content-Type:
      - application/json
      User-Agent:
      - tests/v311
    method: PUT
    uri: http://localhost:3000/api/v2/filters/1
  response:
    body:
      string: '{"id":"1","title":"Updated Title","context":["home","public"],"expires_at":null,"filter_action":"hide","keywords":[{"id":"1","keyword":"spam","whole_word":true},{"id":"2","keyword":"eggs","whole_word":false}],"statuses":[]}'
    headers:
      cache-control:
      - private, no-store
      content-length:
      - '223'
      content-security-policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      content-type:
      - application/json; charset=utf-8
      etag:
      - W/"75c322d2307a06e9eabfedcec5db23c9"
      referrer-policy:
      - strict-origin-when-cross-origin
      server-timing:
      - cache_read.active_support;dur=0.02, sql.active_record;dur=6.19, cache_generate.active_support;dur=1.14,
        cache_write.active_support;dur=0.07, instantiation.active_record;dur=0.32,
        start_processing.action_controller;dur=0.00, unpermitted_parameters.action_controller;dur=0.00,
        start_transaction.active_record;dur=0.00, transaction.active_record;dur=5.20,
        cache_delete.active_support;dur=0.01, render.active_model_serializers;dur=3.34,
        process_action.action_controller;dur=38.09
      vary:
      - Authorization, Origin
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-permitted-cross-domain-policies:
      - none
      x-ratelimit-limit:
      - '300'
      x-ratelimit-remaining:
      - '299'
      x-ratelimit-reset:
      - '2025-11-06T21:20:00.894731Z'
      x-request-id:
      - 7a0f2108-56c8-4a41-9e05-00e496a8f4e6
      x-runtime:
      - '0.056627'
      x-xss-protection:
      - '0'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN_2
      Connection:
      - keep-alive
      User-Agent:
      - tests/v311
    method: GET
    uri: http://localhost:3000/api/v2/filters/1/keywords
  response:
    body:
      string: '[{"id":"1","keyword":"spam","whole_word":true},{"id":"2","keyword":"eggs","whole_word":false}]'
    headers:
      cache-control:
      - private, no-store
      content-length:
      - '94'
      content-security-policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      content-type:
      - application/json; charset=utf-8
      etag:
      - W/"448160244578114f628d3154ab816d99"
      referrer-policy:
      - strict-origin-when-cross-origin
      server-timing:
      - cache_read.active_support;dur=0.03, sql.active_record;dur=1.34, cache_generate.active_support;dur=1.87,
        cache_write.active_support;dur=0.16, instantiation.active_record;dur=0.42,
        start_processing.action_controller;dur=0.00, render.active_model_serializers;dur=0.24,
        process_action.action_controller;dur=30.33
      vary:
      - Authorization, Origin
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-permitted-cross-domain-policies:
      - none
      x-ratelimit-limit:
      - '300'
      x-ratelimit-remaining:
      - '299'
      x-ratelimit-reset:
      - '2025-11-06T21:20:00.985538Z'
      x-request-id:
      - 82316177-9391-4dfd-bb36-5a7ad62d11a3
      x-runtime:
      - '0.053895'
      x-xss-protection:
      - '0'
    status:
      code: 200
      message: OK
- request:
    body: filter_id=1&keyword=foo&whole_word=1
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN_2
      Connection:
      - keep-alive
      Content-Length:
      - '36'
      Content-Type:
      - application/x-www-form-urlencoded
      User-Agent:
      - tests/v311
    method: POST
    uri: http://localhost:3000/api/v2/filters/1/keywords
  response:
    body:
      string: '{"id":"3","keyword":"foo","whole_word":true}'
    headers:
      cache-control:
      - private, no-store
      content-length:
      - '44'
      content-security-policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      content-type:
      - application/json; charset=utf-8
      etag:
      - W/"a4296bbb33212c2a70e018c51a4432b0"
      referrer-policy:
      - strict-origin-when-cross-origin
      server-timing:
      - cache_read.active_support;dur=0.02, sql.active_record;dur=6.29, cache_generate.active_support;dur=1.02,
        cache_write.active_support;dur=0.07, instantiation.active_record;dur=0.31,
        start_processing.action_controller;dur=0.01, unpermitted_parameters.action_controller;dur=0.00,
        start_transaction.active_record;dur=0.00, transaction.active_record;dur=5.57,
        cache_delete.active_support;dur=0.01, render.active_model_serializers;dur=0.18,
        process_action.action_controller;dur=36.66
      vary:
      - Authorization, Origin
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-permitted-cross-domain-policies:
      - none
      x-ratelimit-limit:
      - '300'
      x-ratelimit-remaining:
      - '299'
      x-ratelimit-reset:
      - '2025-11-06T21:20:00.061445Z'
      x-request-id:
      - 02c58534-0463-4229-85df-25681a3d9fbd
      x-runtime:
      - '0.055527'
      x-xss-protection:
      - '0'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN_2
      Connection:
      - keep-alive
      User-Agent:
      - tests/v311
    method: GET
    uri: http://localhost:3000/api/v2/filters/1/keywords
  response:
    body:
      string: '[{"id":"1","keyword":"spam","whole_word":true},{"id":"2","keyword":"eggs","whole_word":false},{"id":"3","keyword":"foo","whole_word":true}]'
    headers:
      cache-control:
      - private, no-store
      content-length:
      - '139'
      content-security-policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      content-type:
      - application/json; charset=utf-8
      etag:
      - W/"8c9de560f2e0b0a646738d2bcfce03ca"
      referrer-policy:
      - strict-origin-when-cross-origin
      server-timing:
      - cache_read.active_support;dur=0.02, sql.active_record;dur=1.24, cache_generate.active_support;dur=1.09,
        cache_write.active_support;dur=0.08, instantiation.active_record;dur=0.43,
        start_processing.action_controller;dur=0.00, render.active_model_serializers;dur=0.26,
        process_action.action_controller;dur=30.92
      vary:
      - Authorization, Origin
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-permitted-cross-domain-policies:
      - none
      x-ratelimit-limit:
      - '300'
      x-ratelimit-remaining:
      - '299'
      x-ratelimit-reset:
      - '2025-11-06T21:20:00.145887Z'
      x-request-id:
      - ef054a30-83d4-4277-9ed6-e09b7bf535b0
      x-runtime:
      - '0.049945'
      x-xss-protection:
      - '0'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN_2
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      User-Agent:
      - tests/v311
    method: DELETE
    uri: http://localhost:3000/api/v2/filters/keywords/1
  response:
    body:
      string: '{}'
    headers:
      cache-control:
      - private, no-store
      content-length:
      - '2'
      content-security-policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      content-type:
      - application/json; charset=utf-8
      etag:
      - W/"44136fa355b3678a1146ad16f7e8649e"
      referrer-policy:
      - strict-origin-when-cross-origin
      server-timing:
      - cache_read.active_support;dur=0.03, sql.active_record;dur=6.05, cache_generate.active_support;dur=1.04,
        cache_write.active_support;dur=0.06, instantiation.active_record;dur=3.61,
        start_processing.action_controller;dur=0.01, start_transaction.active_record;dur=0.00,
        transaction.active_record;dur=4.33, cache_delete.active_support;dur=0.01,
        render.active_model_serializers;dur=0.03, process_action.action_controller;dur=41.37
      vary:
      - Authorization, Origin
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-permitted-cross-domain-policies:
      - none
      x-ratelimit-limit:
      - '300'
      x-ratelimit-remaining:
      - '299'
      x-ratelimit-reset:
      - '2025-11-06T21:20:00.254388Z'
      x-request-id:
      - a31afd33-e047-4580-947d-93006852242e
      x-runtime:
      - '0.073806'
      x-xss-protection:
      - '0'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN_2
      Connection:
      - keep-alive
      User-Agent:
      - tests/v311
    method: GET
    uri: http://localhost:3000/api/v2/filters/1/keywords
  response:
    body:
      string: '[{"id":"2","keyword":"eggs","whole_word":false},{"id":"3","keyword":"foo","whole_word":true}]'
    headers:
      cache-control:
      - private, no-store
      content-length:
      - '93'
      content-security-policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      content-type:
      - application/json; charset=utf-8
      etag:
      - W/"b55fa639f8ede903293e9b67e6bb854a"
      referrer-policy:
      - strict-origin-when-cross-origin
      server-timing:
      - cache_read.active_support;dur=0.03, sql.active_record;dur=1.07, cache_generate.active_support;dur=1.06,
        cache_write.active_support;dur=0.06, instantiation.active_record;dur=0.26,
        start_processing.action_controller;dur=0.00, render.active_model_serializers;dur=0.22,
        process_action.action_controller;dur=29.08
      vary:
      - Authorization, Origin
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-permitted-cross-domain-policies:
      - none
      x-ratelimit-limit:
      - '300'
      x-ratelimit-remaining:
      - '299'
      x-ratelimit-reset:
      - '2025-11-06T21:20:00.340553Z'
      x-request-id:
      - 8e80080a-e0a6-4bbf-b1e1-e6043fe945f9
      x-runtime:
      - '0.047094'
      x-xss-protection:
      - '0'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN_2
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      User-Agent:
      - tests/v311
    method: DELETE
    uri: http://localhost:3000/api/v2/filters/1
  response:
    body:
      string: '{}'
    headers:
      cache-control:
      - private, no-store
      content-length:
      - '2'
      content-security-policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      content-type:
      - application/json; charset=utf-8
      etag:
      - W/"44136fa355b3678a1146ad16f7e8649e"
      referrer-policy:
      - strict-origin-when-cross-origin
      server-timing:
      - cache_read.active_support;dur=0.03, sql.active_record;dur=8.13, cache_generate.active_support;dur=1.66,
        cache_write.active_support;dur=0.07, instantiation.active_record;dur=0.38,
        start_processing.action_controller;dur=0.00, start_transaction.active_record;dur=0.00,
        transaction.active_record;dur=12.03, cache_delete.active_support;dur=0.01,
        render.active_model_serializers;dur=0.03, process_action.action_controller;dur=44.96
      vary:
      - Authorization, Origin
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-permitted-cross-domain-policies:
      - none
      x-ratelimit-limit:
      - '300'
      x-ratelimit-remaining:
      - '299'
      x-ratelimit-reset:
      - '2025-11-06T21:20:00.414548Z'
      x-request-id:
      - 86b83437-5bce-4a01-b790-9fb3b14cccc1
      x-runtime:
      - '0.063285'
      x-xss-protection:
      - '0'
    status:
      code: 200
      message: OK
version: 1
