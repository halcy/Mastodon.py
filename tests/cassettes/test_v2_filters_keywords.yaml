interactions:
- request:
    body: '{"title": "Test Filter", "context": ["home", "public"], "filter_action":
      "warn", "keywords_attributes": [{"keyword": "spam", "whole_word": true}, {"keyword":
      "eggs", "whole_word": false}]}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN_2
      Connection:
      - keep-alive
      Content-Length:
      - '188'
      Content-Type:
      - application/json
      User-Agent:
      - tests/v311
    method: POST
    uri: http://localhost:3000/api/v2/filters
  response:
    body:
      string: '{"id":"1","title":"Test Filter","context":["home","public"],"expires_at":null,"filter_action":"warn","keywords":[{"id":"1","keyword":"spam","whole_word":true},{"id":"2","keyword":"eggs","whole_word":false}],"statuses":[]}'
    headers:
      Content-Length:
      - '221'
      cache-control:
      - private, no-store
      content-security-policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      content-type:
      - application/json; charset=utf-8
      etag:
      - W/"f30e402112caae6e90bd39920326752d"
      referrer-policy:
      - strict-origin-when-cross-origin
      server-timing:
      - cache_read.active_support;dur=0.03, sql.active_record;dur=8.36, cache_generate.active_support;dur=1.02,
        cache_write.active_support;dur=0.07, instantiation.active_record;dur=0.30,
        start_processing.action_controller;dur=0.01, unpermitted_parameters.action_controller;dur=0.00,
        start_transaction.active_record;dur=0.00, transaction.active_record;dur=8.77,
        cache_delete.active_support;dur=0.01, render.active_model_serializers;dur=5.92,
        process_action.action_controller;dur=50.26
      vary:
      - Authorization, Origin
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-permitted-cross-domain-policies:
      - none
      x-ratelimit-limit:
      - '300'
      x-ratelimit-remaining:
      - '299'
      x-ratelimit-reset:
      - '2025-08-17T18:45:00.396447Z'
      x-request-id:
      - a28c900d-1ddd-42f1-9229-5bab2cae0ace
      x-runtime:
      - '0.086730'
      x-xss-protection:
      - '0'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN_2
      Connection:
      - keep-alive
      User-Agent:
      - tests/v311
    method: GET
    uri: http://localhost:3000/api/v2/filters/1
  response:
    body:
      string: '{"id":"1","title":"Test Filter","context":["home","public"],"expires_at":null,"filter_action":"warn","keywords":[{"id":"1","keyword":"spam","whole_word":true},{"id":"2","keyword":"eggs","whole_word":false}],"statuses":[]}'
    headers:
      Content-Length:
      - '221'
      cache-control:
      - private, no-store
      content-security-policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      content-type:
      - application/json; charset=utf-8
      etag:
      - W/"f30e402112caae6e90bd39920326752d"
      referrer-policy:
      - strict-origin-when-cross-origin
      server-timing:
      - cache_read.active_support;dur=0.03, sql.active_record;dur=3.36, cache_generate.active_support;dur=1.05,
        cache_write.active_support;dur=0.08, instantiation.active_record;dur=4.57,
        start_processing.action_controller;dur=0.01, render.active_model_serializers;dur=9.73,
        process_action.action_controller;dur=42.32
      vary:
      - Authorization, Origin
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-permitted-cross-domain-policies:
      - none
      x-ratelimit-limit:
      - '300'
      x-ratelimit-remaining:
      - '299'
      x-ratelimit-reset:
      - '2025-08-17T18:45:00.490638Z'
      x-request-id:
      - da68f84a-c73c-4028-ab05-fa82c184c36f
      x-runtime:
      - '0.077415'
      x-xss-protection:
      - '0'
    status:
      code: 200
      message: OK
- request:
    body: '{"filter_id": "1", "title": "Updated Title", "filter_action": "hide"}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN_2
      Connection:
      - keep-alive
      Content-Length:
      - '69'
      Content-Type:
      - application/json
      User-Agent:
      - tests/v311
    method: PUT
    uri: http://localhost:3000/api/v2/filters/1
  response:
    body:
      string: '{"id":"1","title":"Updated Title","context":["home","public"],"expires_at":null,"filter_action":"hide","keywords":[{"id":"1","keyword":"spam","whole_word":true},{"id":"2","keyword":"eggs","whole_word":false}],"statuses":[]}'
    headers:
      Content-Length:
      - '223'
      cache-control:
      - private, no-store
      content-security-policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      content-type:
      - application/json; charset=utf-8
      etag:
      - W/"75c322d2307a06e9eabfedcec5db23c9"
      referrer-policy:
      - strict-origin-when-cross-origin
      server-timing:
      - cache_read.active_support;dur=0.03, sql.active_record;dur=7.25, cache_generate.active_support;dur=1.26,
        cache_write.active_support;dur=0.08, instantiation.active_record;dur=1.58,
        start_processing.action_controller;dur=0.01, unpermitted_parameters.action_controller;dur=0.00,
        start_transaction.active_record;dur=0.00, transaction.active_record;dur=5.43,
        cache_delete.active_support;dur=0.02, render.active_model_serializers;dur=3.18,
        process_action.action_controller;dur=42.77
      vary:
      - Authorization, Origin
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-permitted-cross-domain-policies:
      - none
      x-ratelimit-limit:
      - '300'
      x-ratelimit-remaining:
      - '299'
      x-ratelimit-reset:
      - '2025-08-17T18:45:00.563730Z'
      x-request-id:
      - 9cc4bc83-ba33-4c0d-a2d1-2e52a559f792
      x-runtime:
      - '0.062854'
      x-xss-protection:
      - '0'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN_2
      Connection:
      - keep-alive
      User-Agent:
      - tests/v311
    method: GET
    uri: http://localhost:3000/api/v2/filters/1/keywords
  response:
    body:
      string: '[{"id":"1","keyword":"spam","whole_word":true},{"id":"2","keyword":"eggs","whole_word":false}]'
    headers:
      Content-Length:
      - '94'
      cache-control:
      - private, no-store
      content-security-policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      content-type:
      - application/json; charset=utf-8
      etag:
      - W/"448160244578114f628d3154ab816d99"
      referrer-policy:
      - strict-origin-when-cross-origin
      server-timing:
      - cache_read.active_support;dur=0.03, sql.active_record;dur=1.04, cache_generate.active_support;dur=0.95,
        cache_write.active_support;dur=0.07, instantiation.active_record;dur=0.26,
        start_processing.action_controller;dur=0.00, render.active_model_serializers;dur=0.20,
        process_action.action_controller;dur=28.98
      vary:
      - Authorization, Origin
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-permitted-cross-domain-policies:
      - none
      x-ratelimit-limit:
      - '300'
      x-ratelimit-remaining:
      - '299'
      x-ratelimit-reset:
      - '2025-08-17T18:45:00.638288Z'
      x-request-id:
      - 7251e440-eb81-46d5-9fec-c450d9b6286a
      x-runtime:
      - '0.050182'
      x-xss-protection:
      - '0'
    status:
      code: 200
      message: OK
- request:
    body: filter_id=1&keyword=foo&whole_word=1
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN_2
      Connection:
      - keep-alive
      Content-Length:
      - '36'
      Content-Type:
      - application/x-www-form-urlencoded
      User-Agent:
      - tests/v311
    method: POST
    uri: http://localhost:3000/api/v2/filters/1/keywords
  response:
    body:
      string: '{"id":"3","keyword":"foo","whole_word":true}'
    headers:
      Content-Length:
      - '44'
      cache-control:
      - private, no-store
      content-security-policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      content-type:
      - application/json; charset=utf-8
      etag:
      - W/"a4296bbb33212c2a70e018c51a4432b0"
      referrer-policy:
      - strict-origin-when-cross-origin
      server-timing:
      - cache_read.active_support;dur=0.03, sql.active_record;dur=5.96, cache_generate.active_support;dur=1.03,
        cache_write.active_support;dur=0.07, instantiation.active_record;dur=0.26,
        start_processing.action_controller;dur=0.00, unpermitted_parameters.action_controller;dur=0.00,
        start_transaction.active_record;dur=0.00, transaction.active_record;dur=5.15,
        cache_delete.active_support;dur=0.01, render.active_model_serializers;dur=0.16,
        process_action.action_controller;dur=35.11
      vary:
      - Authorization, Origin
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-permitted-cross-domain-policies:
      - none
      x-ratelimit-limit:
      - '300'
      x-ratelimit-remaining:
      - '299'
      x-ratelimit-reset:
      - '2025-08-17T18:45:00.694780Z'
      x-request-id:
      - fd5f3b4e-db3f-41b8-88e5-12ff587de5d5
      x-runtime:
      - '0.053035'
      x-xss-protection:
      - '0'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN_2
      Connection:
      - keep-alive
      User-Agent:
      - tests/v311
    method: GET
    uri: http://localhost:3000/api/v2/filters/1/keywords
  response:
    body:
      string: '[{"id":"1","keyword":"spam","whole_word":true},{"id":"2","keyword":"eggs","whole_word":false},{"id":"3","keyword":"foo","whole_word":true}]'
    headers:
      Content-Length:
      - '139'
      cache-control:
      - private, no-store
      content-security-policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      content-type:
      - application/json; charset=utf-8
      etag:
      - W/"8c9de560f2e0b0a646738d2bcfce03ca"
      referrer-policy:
      - strict-origin-when-cross-origin
      server-timing:
      - cache_read.active_support;dur=0.03, sql.active_record;dur=1.33, cache_generate.active_support;dur=1.15,
        cache_write.active_support;dur=0.07, instantiation.active_record;dur=0.36,
        start_processing.action_controller;dur=0.00, render.active_model_serializers;dur=0.24,
        process_action.action_controller;dur=29.01
      vary:
      - Authorization, Origin
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-permitted-cross-domain-policies:
      - none
      x-ratelimit-limit:
      - '300'
      x-ratelimit-remaining:
      - '299'
      x-ratelimit-reset:
      - '2025-08-17T18:45:00.753866Z'
      x-request-id:
      - ed5dc5c2-4868-421e-ab7d-af5d057b3a49
      x-runtime:
      - '0.048929'
      x-xss-protection:
      - '0'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN_2
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      User-Agent:
      - tests/v311
    method: DELETE
    uri: http://localhost:3000/api/v2/filters/keywords/1
  response:
    body:
      string: '{}'
    headers:
      Content-Length:
      - '2'
      cache-control:
      - private, no-store
      content-security-policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      content-type:
      - application/json; charset=utf-8
      etag:
      - W/"44136fa355b3678a1146ad16f7e8649e"
      referrer-policy:
      - strict-origin-when-cross-origin
      server-timing:
      - cache_read.active_support;dur=0.04, sql.active_record;dur=5.72, cache_generate.active_support;dur=1.24,
        cache_write.active_support;dur=0.08, instantiation.active_record;dur=0.30,
        start_processing.action_controller;dur=0.00, start_transaction.active_record;dur=0.00,
        transaction.active_record;dur=4.78, cache_delete.active_support;dur=0.01,
        render.active_model_serializers;dur=0.03, process_action.action_controller;dur=38.41
      vary:
      - Authorization, Origin
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-permitted-cross-domain-policies:
      - none
      x-ratelimit-limit:
      - '300'
      x-ratelimit-remaining:
      - '299'
      x-ratelimit-reset:
      - '2025-08-17T18:45:00.814360Z'
      x-request-id:
      - d3d4260d-1276-4feb-8e1a-5e90b57f583f
      x-runtime:
      - '0.057904'
      x-xss-protection:
      - '0'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN_2
      Connection:
      - keep-alive
      User-Agent:
      - tests/v311
    method: GET
    uri: http://localhost:3000/api/v2/filters/1/keywords
  response:
    body:
      string: '[{"id":"2","keyword":"eggs","whole_word":false},{"id":"3","keyword":"foo","whole_word":true}]'
    headers:
      Content-Length:
      - '93'
      cache-control:
      - private, no-store
      content-security-policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      content-type:
      - application/json; charset=utf-8
      etag:
      - W/"b55fa639f8ede903293e9b67e6bb854a"
      referrer-policy:
      - strict-origin-when-cross-origin
      server-timing:
      - cache_read.active_support;dur=0.03, sql.active_record;dur=1.08, cache_generate.active_support;dur=0.98,
        cache_write.active_support;dur=0.07, instantiation.active_record;dur=0.28,
        start_processing.action_controller;dur=0.00, render.active_model_serializers;dur=0.23,
        process_action.action_controller;dur=29.21
      vary:
      - Authorization, Origin
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-permitted-cross-domain-policies:
      - none
      x-ratelimit-limit:
      - '300'
      x-ratelimit-remaining:
      - '299'
      x-ratelimit-reset:
      - '2025-08-17T18:45:00.879350Z'
      x-request-id:
      - faf08cac-4177-4fae-88aa-b287b4e74a67
      x-runtime:
      - '0.047167'
      x-xss-protection:
      - '0'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN_2
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      User-Agent:
      - tests/v311
    method: DELETE
    uri: http://localhost:3000/api/v2/filters/1
  response:
    body:
      string: '{}'
    headers:
      Content-Length:
      - '2'
      cache-control:
      - private, no-store
      content-security-policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      content-type:
      - application/json; charset=utf-8
      etag:
      - W/"44136fa355b3678a1146ad16f7e8649e"
      referrer-policy:
      - strict-origin-when-cross-origin
      server-timing:
      - cache_read.active_support;dur=0.03, sql.active_record;dur=6.47, cache_generate.active_support;dur=0.98,
        cache_write.active_support;dur=0.07, instantiation.active_record;dur=0.33,
        start_processing.action_controller;dur=0.00, start_transaction.active_record;dur=0.00,
        transaction.active_record;dur=8.01, cache_delete.active_support;dur=0.01,
        render.active_model_serializers;dur=0.02, process_action.action_controller;dur=38.77
      vary:
      - Authorization, Origin
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-permitted-cross-domain-policies:
      - none
      x-ratelimit-limit:
      - '300'
      x-ratelimit-remaining:
      - '299'
      x-ratelimit-reset:
      - '2025-08-17T18:45:00.933729Z'
      x-request-id:
      - 67627e82-30ec-4db3-b08e-9d64009935f2
      x-runtime:
      - '0.055702'
      x-xss-protection:
      - '0'
    status:
      code: 200
      message: OK
version: 1
