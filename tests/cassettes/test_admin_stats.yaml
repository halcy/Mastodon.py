interactions:
- request:
    body: '{"instance_accounts": {"domain": "chitter.xyz"}, "instance_media_attachments":
      {"domain": "chitter.xyz"}, "instance_reports": {"domain": "chitter.xyz"}, "instance_statuses":
      {"domain": "chitter.xyz"}, "instance_follows": {"domain": "chitter.xyz"}, "instance_followers":
      {"domain": "chitter.xyz"}, "keys": ["active_users", "new_users", "opened_reports",
      "resolved_reports", "instance_accounts", "instance_media_attachments", "instance_reports",
      "instance_statuses", "instance_follows", "instance_followers"], "start_at":
      "2020-10-04T21:00:00+00:00", "end_at": "2020-10-09T21:00:00+00:00"}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN_2
      Connection:
      - keep-alive
      Content-Length:
      - '587'
      Content-Type:
      - application/json
      User-Agent:
      - tests/v311
    method: POST
    uri: http://localhost:3000/api/v1/admin/measures
  response:
    body:
      string: '[{"key":"active_users","unit":null,"total":"0","previous_total":"0","data":[{"date":"2020-10-04T00:00:00Z","value":"0"},{"date":"2020-10-05T00:00:00Z","value":"0"},{"date":"2020-10-06T00:00:00Z","value":"0"},{"date":"2020-10-07T00:00:00Z","value":"0"},{"date":"2020-10-08T00:00:00Z","value":"0"},{"date":"2020-10-09T00:00:00Z","value":"0"}]},{"key":"new_users","unit":null,"total":"0","previous_total":"0","data":[{"date":"2020-10-04","value":"0"},{"date":"2020-10-05","value":"0"},{"date":"2020-10-06","value":"0"},{"date":"2020-10-07","value":"0"},{"date":"2020-10-08","value":"0"},{"date":"2020-10-09","value":"0"}]},{"key":"opened_reports","unit":null,"total":"0","previous_total":"0","data":[{"date":"2020-10-04","value":"0"},{"date":"2020-10-05","value":"0"},{"date":"2020-10-06","value":"0"},{"date":"2020-10-07","value":"0"},{"date":"2020-10-08","value":"0"},{"date":"2020-10-09","value":"0"}]},{"key":"resolved_reports","unit":null,"total":"0","previous_total":"0","data":[{"date":"2020-10-04","value":"0"},{"date":"2020-10-05","value":"0"},{"date":"2020-10-06","value":"0"},{"date":"2020-10-07","value":"0"},{"date":"2020-10-08","value":"0"},{"date":"2020-10-09","value":"0"}]},{"key":"instance_accounts","unit":null,"total":"0","data":[{"date":"2020-10-04","value":"0"},{"date":"2020-10-05","value":"0"},{"date":"2020-10-06","value":"0"},{"date":"2020-10-07","value":"0"},{"date":"2020-10-08","value":"0"},{"date":"2020-10-09","value":"0"}]},{"key":"instance_media_attachments","unit":"bytes","total":"0","human_value":"0
        Bytes","data":[{"date":"2020-10-04","value":"0"},{"date":"2020-10-05","value":"0"},{"date":"2020-10-06","value":"0"},{"date":"2020-10-07","value":"0"},{"date":"2020-10-08","value":"0"},{"date":"2020-10-09","value":"0"}]},{"key":"instance_reports","unit":null,"total":"0","data":[{"date":"2020-10-04","value":"0"},{"date":"2020-10-05","value":"0"},{"date":"2020-10-06","value":"0"},{"date":"2020-10-07","value":"0"},{"date":"2020-10-08","value":"0"},{"date":"2020-10-09","value":"0"}]},{"key":"instance_statuses","unit":null,"total":"0","data":[{"date":"2020-10-04","value":"0"},{"date":"2020-10-05","value":"0"},{"date":"2020-10-06","value":"0"},{"date":"2020-10-07","value":"0"},{"date":"2020-10-08","value":"0"},{"date":"2020-10-09","value":"0"}]},{"key":"instance_follows","unit":null,"total":"0","data":[{"date":"2020-10-04","value":"0"},{"date":"2020-10-05","value":"0"},{"date":"2020-10-06","value":"0"},{"date":"2020-10-07","value":"0"},{"date":"2020-10-08","value":"0"},{"date":"2020-10-09","value":"0"}]},{"key":"instance_followers","unit":null,"total":"0","data":[{"date":"2020-10-04","value":"0"},{"date":"2020-10-05","value":"0"},{"date":"2020-10-06","value":"0"},{"date":"2020-10-07","value":"0"},{"date":"2020-10-08","value":"0"},{"date":"2020-10-09","value":"0"}]}]'
    headers:
      Content-Length:
      - '2813'
      cache-control:
      - private, no-store
      content-security-policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      content-type:
      - application/json; charset=utf-8
      etag:
      - W/"3c9ce68e4b4c4897fd6a2cc93f5c30f3"
      referrer-policy:
      - strict-origin-when-cross-origin
      server-timing:
      - cache_read.active_support;dur=0.14, sql.active_record;dur=6.02, cache_generate.active_support;dur=16.50,
        cache_write.active_support;dur=0.58, instantiation.active_record;dur=0.31,
        start_processing.action_controller;dur=0.01, render.active_model_serializers;dur=21.08,
        process_action.action_controller;dur=68.44
      vary:
      - Authorization, Origin
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-permitted-cross-domain-policies:
      - none
      x-ratelimit-limit:
      - '300'
      x-ratelimit-remaining:
      - '299'
      x-ratelimit-reset:
      - '2025-08-17T18:45:00.210460Z'
      x-request-id:
      - 07ec7960-8a21-4637-893b-c2aa51cf4e53
      x-runtime:
      - '0.103782'
      x-xss-protection:
      - '0'
    status:
      code: 200
      message: OK
- request:
    body: '{"instance_accounts": {"domain": "chitter.xyz"}, "instance_languages":
      {"domain": "chitter.xyz"}, "keys": ["languages", "sources", "servers", "space_usage",
      "instance_accounts", "instance_languages"], "limit": 3, "start_at": "2020-10-04T21:00:00+00:00",
      "end_at": "2020-10-09T21:00:00+00:00"}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN_2
      Connection:
      - keep-alive
      Content-Length:
      - '292'
      Content-Type:
      - application/json
      User-Agent:
      - tests/v311
    method: POST
    uri: http://localhost:3000/api/v1/admin/dimensions
  response:
    body:
      string: '[{"key":"languages","data":[]},{"key":"sources","data":[]},{"key":"servers","data":[]},{"key":"space_usage","data":[{"key":"postgresql","human_key":"PostgreSQL","value":"19551023","unit":"bytes","human_value":"18.6
        MB"},{"key":"redis","human_key":"Redis","value":"2754144","unit":"bytes","human_value":"2.63
        MB"},{"key":"media","human_key":"Media storage","value":"936745","unit":"bytes","human_value":"915
        KB"}]},{"key":"instance_accounts","data":[]},{"key":"instance_languages","data":[]}]'
    headers:
      Content-Length:
      - '491'
      cache-control:
      - private, no-store
      content-security-policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      content-type:
      - application/json; charset=utf-8
      etag:
      - W/"9119f9def8636f9ceed13c915aa431ea"
      referrer-policy:
      - strict-origin-when-cross-origin
      server-timing:
      - cache_read.active_support;dur=0.13, sql.active_record;dur=13.06, cache_generate.active_support;dur=36.95,
        cache_write.active_support;dur=0.27, instantiation.active_record;dur=0.27,
        start_processing.action_controller;dur=0.01, render.active_model_serializers;dur=37.42,
        process_action.action_controller;dur=87.33
      vary:
      - Authorization, Origin
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-permitted-cross-domain-policies:
      - none
      x-ratelimit-limit:
      - '300'
      x-ratelimit-remaining:
      - '299'
      x-ratelimit-reset:
      - '2025-08-17T18:45:00.359544Z'
      x-request-id:
      - 5454705f-f052-48c7-8dcd-0ffb998548d7
      x-runtime:
      - '0.145201'
      x-xss-protection:
      - '0'
    status:
      code: 200
      message: OK
- request:
    body: start_at=2020-09-29T21%3A00%3A00%2B00%3A00&end_at=2020-10-09T21%3A00%3A00%2B00%3A00&frequency=day
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN_2
      Connection:
      - keep-alive
      Content-Length:
      - '97'
      Content-Type:
      - application/x-www-form-urlencoded
      User-Agent:
      - tests/v311
    method: POST
    uri: http://localhost:3000/api/v1/admin/retention
  response:
    body:
      string: '[{"period":"2020-09-29T00:00:00+00:00","frequency":"day","data":[{"date":"2020-09-29T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-09-30T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-01T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-02T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-03T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-04T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-05T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-06T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-07T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-08T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-09T00:00:00+00:00","rate":0.0,"value":"0"}]},{"period":"2020-09-30T00:00:00+00:00","frequency":"day","data":[{"date":"2020-09-30T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-01T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-02T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-03T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-04T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-05T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-06T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-07T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-08T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-09T00:00:00+00:00","rate":0.0,"value":"0"}]},{"period":"2020-10-01T00:00:00+00:00","frequency":"day","data":[{"date":"2020-10-01T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-02T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-03T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-04T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-05T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-06T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-07T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-08T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-09T00:00:00+00:00","rate":0.0,"value":"0"}]},{"period":"2020-10-02T00:00:00+00:00","frequency":"day","data":[{"date":"2020-10-02T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-03T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-04T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-05T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-06T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-07T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-08T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-09T00:00:00+00:00","rate":0.0,"value":"0"}]},{"period":"2020-10-03T00:00:00+00:00","frequency":"day","data":[{"date":"2020-10-03T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-04T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-05T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-06T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-07T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-08T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-09T00:00:00+00:00","rate":0.0,"value":"0"}]},{"period":"2020-10-04T00:00:00+00:00","frequency":"day","data":[{"date":"2020-10-04T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-05T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-06T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-07T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-08T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-09T00:00:00+00:00","rate":0.0,"value":"0"}]},{"period":"2020-10-05T00:00:00+00:00","frequency":"day","data":[{"date":"2020-10-05T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-06T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-07T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-08T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-09T00:00:00+00:00","rate":0.0,"value":"0"}]},{"period":"2020-10-06T00:00:00+00:00","frequency":"day","data":[{"date":"2020-10-06T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-07T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-08T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-09T00:00:00+00:00","rate":0.0,"value":"0"}]},{"period":"2020-10-07T00:00:00+00:00","frequency":"day","data":[{"date":"2020-10-07T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-08T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-09T00:00:00+00:00","rate":0.0,"value":"0"}]},{"period":"2020-10-08T00:00:00+00:00","frequency":"day","data":[{"date":"2020-10-08T00:00:00+00:00","rate":0.0,"value":"0"},{"date":"2020-10-09T00:00:00+00:00","rate":0.0,"value":"0"}]},{"period":"2020-10-09T00:00:00+00:00","frequency":"day","data":[{"date":"2020-10-09T00:00:00+00:00","rate":0.0,"value":"0"}]}]'
    headers:
      Content-Length:
      - '4687'
      cache-control:
      - private, no-store
      content-security-policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      content-type:
      - application/json; charset=utf-8
      etag:
      - W/"7c0b9d5d1e0b7ed4fc44340469c598c1"
      referrer-policy:
      - strict-origin-when-cross-origin
      server-timing:
      - cache_read.active_support;dur=0.05, sql.active_record;dur=249.05, cache_generate.active_support;dur=250.20,
        cache_write.active_support;dur=0.57, instantiation.active_record;dur=0.28,
        start_processing.action_controller;dur=0.01, render.active_model_serializers;dur=3.86,
        process_action.action_controller;dur=285.43
      vary:
      - Authorization, Origin
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-permitted-cross-domain-policies:
      - none
      x-ratelimit-limit:
      - '300'
      x-ratelimit-remaining:
      - '299'
      x-ratelimit-reset:
      - '2025-08-17T18:45:00.477190Z'
      x-request-id:
      - 051d27c8-8214-41db-b27c-d697a0aca5e1
      x-runtime:
      - '0.306028'
      x-xss-protection:
      - '0'
    status:
      code: 200
      message: OK
version: 1
