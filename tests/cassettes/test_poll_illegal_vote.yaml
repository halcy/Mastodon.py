interactions:
- request:
    body: '{"status": "nice", "poll": {"options": ["four twenty", "sixty-nine"], "expires_in":
      300, "multiple": false, "hide_totals": false}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN_2
      Connection:
      - keep-alive
      Content-Length:
      - '130'
      Content-Type:
      - application/json
      User-Agent:
      - tests/v311
    method: POST
    uri: http://localhost:3000/api/v1/statuses
  response:
    body:
      string: '{"id":"115045582573694590","created_at":"2025-08-17T18:44:37.065Z","in_reply_to_id":null,"in_reply_to_account_id":null,"sensitive":false,"spoiler_text":"","visibility":"public","language":"en","uri":"http://localhost:3000/users/admin/statuses/115045582573694590","url":"http://localhost:3000/@admin/115045582573694590","replies_count":0,"reblogs_count":0,"favourites_count":0,"edited_at":null,"favourited":false,"reblogged":false,"muted":false,"bookmarked":false,"pinned":false,"content":"\u003cp\u003enice\u003c/p\u003e","filtered":[],"reblog":null,"application":{"name":"Mastodon.py
        test suite","website":null},"account":{"id":"115045157726281124","username":"admin","acct":"admin","display_name":"","locked":false,"bot":false,"discoverable":null,"indexable":false,"group":false,"created_at":"2025-08-17T00:00:00.000Z","note":"","url":"http://localhost:3000/@admin","uri":"http://localhost:3000/users/admin","avatar":"http://localhost:3000/avatars/original/missing.png","avatar_static":"http://localhost:3000/avatars/original/missing.png","header":"http://localhost:3000/headers/original/missing.png","header_static":"http://localhost:3000/headers/original/missing.png","followers_count":0,"following_count":0,"statuses_count":2,"last_status_at":"2025-08-17","hide_collections":null,"noindex":false,"emojis":[],"roles":[{"id":"3","name":"Owner","color":""}],"fields":[]},"media_attachments":[],"mentions":[],"tags":[],"emojis":[],"quote":null,"card":null,"poll":{"id":"2","expires_at":"2025-08-17T18:49:37.062Z","expired":false,"multiple":false,"votes_count":0,"voters_count":0,"voted":true,"own_votes":[],"options":[{"title":"four
        twenty","votes_count":0},{"title":"sixty-nine","votes_count":0}],"emojis":[]}}'
    headers:
      Content-Length:
      - '1712'
      cache-control:
      - private, no-store
      content-security-policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      content-type:
      - application/json; charset=utf-8
      etag:
      - W/"ce4519c9524b509a9ca8cee0977685bf"
      referrer-policy:
      - strict-origin-when-cross-origin
      server-timing:
      - cache_read.active_support;dur=0.06, sql.active_record;dur=15.67, cache_generate.active_support;dur=3.04,
        cache_write.active_support;dur=0.15, instantiation.active_record;dur=0.42,
        start_processing.action_controller;dur=0.00, start_transaction.active_record;dur=0.00,
        transaction.active_record;dur=7.36, render.active_model_serializers;dur=14.56,
        process_action.action_controller;dur=64.12
      vary:
      - Authorization, Origin
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-permitted-cross-domain-policies:
      - none
      x-ratelimit-limit:
      - '300'
      x-ratelimit-remaining:
      - '275'
      x-ratelimit-reset:
      - '2025-08-17T21:00:00.097686Z'
      x-request-id:
      - 6ef2824a-7021-447f-bc7d-9b168b4befc2
      x-runtime:
      - '0.082493'
      x-xss-protection:
      - '0'
    status:
      code: 200
      message: OK
- request:
    body: choices%5B%5D=1
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN
      Connection:
      - keep-alive
      Content-Length:
      - '15'
      Content-Type:
      - application/x-www-form-urlencoded
      User-Agent:
      - tests/v311
    method: POST
    uri: http://localhost:3000/api/v1/polls/2/votes
  response:
    body:
      string: '{"id":"2","expires_at":"2025-08-17T18:49:37.062Z","expired":false,"multiple":false,"votes_count":1,"voters_count":1,"voted":true,"own_votes":[1],"options":[{"title":"four
        twenty","votes_count":0},{"title":"sixty-nine","votes_count":1}],"emojis":[]}'
    headers:
      Content-Length:
      - '248'
      cache-control:
      - private, no-store
      content-security-policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      content-type:
      - application/json; charset=utf-8
      etag:
      - W/"b50c067a61f944f3a523b773c46a4b20"
      referrer-policy:
      - strict-origin-when-cross-origin
      server-timing:
      - cache_read.active_support;dur=0.04, sql.active_record;dur=15.67, cache_generate.active_support;dur=1.21,
        cache_write.active_support;dur=0.08, instantiation.active_record;dur=0.48,
        start_processing.action_controller;dur=0.00, start_transaction.active_record;dur=0.01,
        transaction.active_record;dur=13.25, cache_delete.active_support;dur=0.02,
        render.active_model_serializers;dur=2.16, process_action.action_controller;dur=56.42
      vary:
      - Authorization, Origin
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-permitted-cross-domain-policies:
      - none
      x-ratelimit-limit:
      - '300'
      x-ratelimit-remaining:
      - '299'
      x-ratelimit-reset:
      - '2025-08-17T18:45:00.179884Z'
      x-request-id:
      - 2a8ab347-3f28-4a7d-a139-79abefc52e70
      x-runtime:
      - '0.074011'
      x-xss-protection:
      - '0'
    status:
      code: 200
      message: OK
- request:
    body: choices%5B%5D=0
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN
      Connection:
      - keep-alive
      Content-Length:
      - '15'
      Content-Type:
      - application/x-www-form-urlencoded
      User-Agent:
      - tests/v311
    method: POST
    uri: http://localhost:3000/api/v1/polls/2/votes
  response:
    body:
      string: "{\"error\":\"\u30D0\u30EA\u30C7\u30FC\u30B7\u30E7\u30F3\u306B\u5931\
        \u6557\u3057\u307E\u3057\u305F: \u3053\u306E\u30A2\u30F3\u30B1\u30FC\u30C8\
        \u306B\u306F\u6295\u7968\u6E08\u307F\u3067\u3059\"}"
    headers:
      Content-Length:
      - '101'
      cache-control:
      - private, no-store
      content-security-policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      content-type:
      - application/json; charset=utf-8
      referrer-policy:
      - strict-origin-when-cross-origin
      server-timing:
      - cache_read.active_support;dur=0.03, sql.active_record;dur=1.63, cache_generate.active_support;dur=0.95,
        cache_write.active_support;dur=0.09, instantiation.active_record;dur=0.37,
        start_processing.action_controller;dur=0.00, render.active_model_serializers;dur=0.03,
        process_action.action_controller;dur=36.46
      vary:
      - Authorization, Origin
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-permitted-cross-domain-policies:
      - none
      x-ratelimit-limit:
      - '300'
      x-ratelimit-remaining:
      - '299'
      x-ratelimit-reset:
      - '2025-08-17T18:45:00.264720Z'
      x-request-id:
      - 5d906721-890e-43ca-a28e-919a580e7549
      x-runtime:
      - '0.053485'
      x-xss-protection:
      - '0'
    status:
      code: 422
      message: Unprocessable Content
version: 1
