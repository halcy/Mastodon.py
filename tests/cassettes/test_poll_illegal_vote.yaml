interactions:
- request:
    body: '{"status": "nice", "poll": {"options": ["four twenty", "sixty-nine"], "expires_in":
      300, "multiple": false, "hide_totals": false}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN_2
      Connection:
      - keep-alive
      Content-Length:
      - '130'
      Content-Type:
      - application/json
      User-Agent:
      - tests/v311
    method: POST
    uri: http://localhost:3000/api/v1/statuses
  response:
    body:
      string: '{"id":"115504849438395144","created_at":"2025-11-06T21:22:13.275Z","in_reply_to_id":null,"in_reply_to_account_id":null,"sensitive":false,"spoiler_text":"","visibility":"public","language":"en","uri":"http://localhost:3000/ap/users/115504820987601773/statuses/115504849438395144","url":"http://localhost:3000/@admin/115504849438395144","replies_count":0,"reblogs_count":0,"favourites_count":0,"quotes_count":0,"edited_at":null,"favourited":false,"reblogged":false,"muted":false,"bookmarked":false,"pinned":false,"content":"\u003cp\u003enice\u003c/p\u003e","filtered":[],"reblog":null,"application":{"name":"Mastodon.py
        test suite","website":null},"account":{"id":"115504820987601773","username":"admin","acct":"admin","display_name":"","locked":false,"bot":false,"discoverable":null,"indexable":false,"group":false,"created_at":"2025-11-06T00:00:00.000Z","note":"","url":"http://localhost:3000/@admin","uri":"http://localhost:3000/ap/users/115504820987601773","avatar":"http://localhost:3000/avatars/original/missing.png","avatar_static":"http://localhost:3000/avatars/original/missing.png","header":"http://localhost:3000/headers/original/missing.png","header_static":"http://localhost:3000/headers/original/missing.png","followers_count":0,"following_count":0,"statuses_count":2,"last_status_at":"2025-11-06","hide_collections":null,"noindex":false,"emojis":[],"roles":[{"id":"3","name":"Owner","color":""}],"fields":[]},"media_attachments":[],"mentions":[],"tags":[],"emojis":[],"quote":null,"card":null,"poll":{"id":"2","expires_at":"2025-11-06T21:27:13.272Z","expired":false,"multiple":false,"votes_count":0,"voters_count":0,"voted":true,"own_votes":[],"options":[{"title":"four
        twenty","votes_count":0},{"title":"sixty-nine","votes_count":0}],"emojis":[]},"quote_approval":{"automatic":["public"],"manual":[],"current_user":"automatic"}}'
    headers:
      cache-control:
      - private, no-store
      content-length:
      - '1842'
      content-security-policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      content-type:
      - application/json; charset=utf-8
      etag:
      - W/"ed4c29b865b9bdbe157f476d11fd96ae"
      referrer-policy:
      - strict-origin-when-cross-origin
      server-timing:
      - cache_read.active_support;dur=0.06, sql.active_record;dur=17.74, cache_generate.active_support;dur=3.80,
        cache_write.active_support;dur=0.14, instantiation.active_record;dur=0.50,
        start_processing.action_controller;dur=0.00, start_transaction.active_record;dur=0.00,
        transaction.active_record;dur=13.09, render.active_model_serializers;dur=19.03,
        process_action.action_controller;dur=79.20
      vary:
      - Authorization, Origin
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-permitted-cross-domain-policies:
      - none
      x-ratelimit-limit:
      - '300'
      x-ratelimit-remaining:
      - '280'
      x-ratelimit-reset:
      - '2025-11-07T00:00:00.322066Z'
      x-request-id:
      - 5a236658-b391-4321-ae4f-b262aede2797
      x-runtime:
      - '0.097970'
      x-xss-protection:
      - '0'
    status:
      code: 200
      message: OK
- request:
    body: choices%5B%5D=1
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN
      Connection:
      - keep-alive
      Content-Length:
      - '15'
      Content-Type:
      - application/x-www-form-urlencoded
      User-Agent:
      - tests/v311
    method: POST
    uri: http://localhost:3000/api/v1/polls/2/votes
  response:
    body:
      string: '{"id":"2","expires_at":"2025-11-06T21:27:13.272Z","expired":false,"multiple":false,"votes_count":1,"voters_count":1,"voted":true,"own_votes":[1],"options":[{"title":"four
        twenty","votes_count":0},{"title":"sixty-nine","votes_count":1}],"emojis":[]}'
    headers:
      cache-control:
      - private, no-store
      content-length:
      - '248'
      content-security-policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      content-type:
      - application/json; charset=utf-8
      etag:
      - W/"68b659ba6c1aad84dcee7a95436f195e"
      referrer-policy:
      - strict-origin-when-cross-origin
      server-timing:
      - cache_read.active_support;dur=0.10, sql.active_record;dur=16.96, cache_generate.active_support;dur=1.13,
        cache_write.active_support;dur=0.07, instantiation.active_record;dur=0.41,
        start_processing.action_controller;dur=0.01, start_transaction.active_record;dur=0.01,
        transaction.active_record;dur=14.52, cache_delete.active_support;dur=0.03,
        render.active_model_serializers;dur=3.08, process_action.action_controller;dur=64.49
      vary:
      - Authorization, Origin
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-permitted-cross-domain-policies:
      - none
      x-ratelimit-limit:
      - '300'
      x-ratelimit-remaining:
      - '299'
      x-ratelimit-reset:
      - '2025-11-06T21:25:00.440256Z'
      x-request-id:
      - 63c905e6-bb6b-433d-a920-e6317e5b100e
      x-runtime:
      - '0.090198'
      x-xss-protection:
      - '0'
    status:
      code: 200
      message: OK
- request:
    body: choices%5B%5D=0
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN
      Connection:
      - keep-alive
      Content-Length:
      - '15'
      Content-Type:
      - application/x-www-form-urlencoded
      User-Agent:
      - tests/v311
    method: POST
    uri: http://localhost:3000/api/v1/polls/2/votes
  response:
    body:
      string: "{\"error\":\"\u30D0\u30EA\u30C7\u30FC\u30B7\u30E7\u30F3\u306B\u5931\
        \u6557\u3057\u307E\u3057\u305F: \u3053\u306E\u30A2\u30F3\u30B1\u30FC\u30C8\
        \u306B\u306F\u6295\u7968\u6E08\u307F\u3067\u3059\"}"
    headers:
      cache-control:
      - private, no-store
      content-length:
      - '101'
      content-security-policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      content-type:
      - application/json; charset=utf-8
      referrer-policy:
      - strict-origin-when-cross-origin
      server-timing:
      - cache_read.active_support;dur=0.03, sql.active_record;dur=1.85, cache_generate.active_support;dur=1.04,
        cache_write.active_support;dur=0.07, instantiation.active_record;dur=0.43,
        start_processing.action_controller;dur=0.00, render.active_model_serializers;dur=0.04,
        process_action.action_controller;dur=39.11
      vary:
      - Authorization, Origin
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-permitted-cross-domain-policies:
      - none
      x-ratelimit-limit:
      - '300'
      x-ratelimit-remaining:
      - '299'
      x-ratelimit-reset:
      - '2025-11-06T21:25:00.553143Z'
      x-request-id:
      - f0c9c6a9-dab7-444f-87a3-89380e0361c6
      x-runtime:
      - '0.056879'
      x-xss-protection:
      - '0'
    status:
      code: 422
      message: Unprocessable Content
version: 1
