interactions:
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN_2
      Connection:
      - keep-alive
      User-Agent:
      - tests/v311
    method: GET
    uri: http://localhost:3000/api/v2/notifications/policy
  response:
    body:
      string: '{"for_not_following":"accept","for_not_followers":"accept","for_new_accounts":"accept","for_private_mentions":"filter","for_limited_accounts":"filter","summary":{"pending_requests_count":0,"pending_notifications_count":0}}'
    headers:
      Cache-Control:
      - private, no-store
      Content-Length:
      - '222'
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      Content-Type:
      - application/json; charset=utf-8
      ETag:
      - W/"1fe62b83e0aed327fbf1f30df7ad7e96"
      Referrer-Policy:
      - strict-origin-when-cross-origin
      Server-Timing:
      - cache_read.active_support;dur=0.02, sql.active_record;dur=3.85, cache_generate.active_support;dur=0.74,
        cache_write.active_support;dur=0.07, instantiation.active_record;dur=0.21,
        start_processing.action_controller;dur=0.00, render.active_model_serializers;dur=0.16,
        process_action.action_controller;dur=37.16
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-Permitted-Cross-Domain-Policies:
      - none
      X-RateLimit-Limit:
      - '300'
      X-RateLimit-Remaining:
      - '299'
      X-RateLimit-Reset:
      - '2025-08-15T17:35:00.316629Z'
      X-Request-Id:
      - 968954e6-1eac-4dc3-a00a-b7269bdf8cca
      X-Runtime:
      - '0.058530'
      X-XSS-Protection:
      - '0'
      vary:
      - Authorization, Origin
    status:
      code: 200
      message: OK
- request:
    body: for_not_following=filter&for_not_followers=accept
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN_2
      Connection:
      - keep-alive
      Content-Length:
      - '49'
      Content-Type:
      - application/x-www-form-urlencoded
      User-Agent:
      - tests/v311
    method: PATCH
    uri: http://localhost:3000/api/v2/notifications/policy
  response:
    body:
      string: '{"for_not_following":"filter","for_not_followers":"accept","for_new_accounts":"accept","for_private_mentions":"filter","for_limited_accounts":"filter","summary":{"pending_requests_count":0,"pending_notifications_count":0}}'
    headers:
      Cache-Control:
      - private, no-store
      Content-Length:
      - '222'
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      Content-Type:
      - application/json; charset=utf-8
      ETag:
      - W/"017d15acc00d01e7395f157390a5994c"
      Referrer-Policy:
      - strict-origin-when-cross-origin
      Server-Timing:
      - cache_read.active_support;dur=0.02, sql.active_record;dur=9.60, cache_generate.active_support;dur=0.89,
        cache_write.active_support;dur=0.08, instantiation.active_record;dur=0.28,
        start_processing.action_controller;dur=0.00, transaction.active_record;dur=6.09,
        render.active_model_serializers;dur=0.15, process_action.action_controller;dur=42.67
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-Permitted-Cross-Domain-Policies:
      - none
      X-RateLimit-Limit:
      - '300'
      X-RateLimit-Remaining:
      - '299'
      X-RateLimit-Reset:
      - '2025-08-15T17:35:00.382981Z'
      X-Request-Id:
      - ac2b904b-9eb7-4d22-9f3b-474dde7add1a
      X-Runtime:
      - '0.067314'
      X-XSS-Protection:
      - '0'
      vary:
      - Authorization, Origin
    status:
      code: 200
      message: OK
- request:
    body: for_not_following=accept&for_not_followers=accept&for_new_accounts=accept&for_private_mentions=accept&for_limited_accounts=accept
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, br
      Authorization:
      - Bearer __MASTODON_PY_TEST_ACCESS_TOKEN_2
      Connection:
      - keep-alive
      Content-Length:
      - '129'
      Content-Type:
      - application/x-www-form-urlencoded
      User-Agent:
      - tests/v311
    method: PATCH
    uri: http://localhost:3000/api/v2/notifications/policy
  response:
    body:
      string: '{"for_not_following":"accept","for_not_followers":"accept","for_new_accounts":"accept","for_private_mentions":"accept","for_limited_accounts":"accept","summary":{"pending_requests_count":0,"pending_notifications_count":0}}'
    headers:
      Cache-Control:
      - private, no-store
      Content-Length:
      - '222'
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'; form-action 'none'
      Content-Type:
      - application/json; charset=utf-8
      ETag:
      - W/"5b34317397a0dd74b93479cc531b50b9"
      Referrer-Policy:
      - strict-origin-when-cross-origin
      Server-Timing:
      - cache_read.active_support;dur=0.02, sql.active_record;dur=4.92, cache_generate.active_support;dur=1.08,
        cache_write.active_support;dur=0.10, instantiation.active_record;dur=0.44,
        start_processing.action_controller;dur=0.00, transaction.active_record;dur=4.47,
        render.active_model_serializers;dur=0.14, process_action.action_controller;dur=29.22
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-Permitted-Cross-Domain-Policies:
      - none
      X-RateLimit-Limit:
      - '300'
      X-RateLimit-Remaining:
      - '299'
      X-RateLimit-Reset:
      - '2025-08-15T17:35:00.454573Z'
      X-Request-Id:
      - b6ca21fa-ffe5-4306-a9f3-cb4db600c42e
      X-Runtime:
      - '0.048448'
      X-XSS-Protection:
      - '0'
      vary:
      - Authorization, Origin
    status:
      code: 200
      message: OK
version: 1
